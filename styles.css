const calendar = document.getElementById('calendar');
const bookingForm = document.getElementById('bookingForm');
const filterButton = document.getElementById('filter');
const equipmentSelect = document.getElementById('equipment');
const lightSourceSelect = document.getElementById('light-source');

let bookings = [];

function renderCalendar() {
    calendar.innerHTML = '';
    for (let day = 0; day < 7; day++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'day';
        for (let hour = 0; hour < 24; hour++) {
            const hourDiv = document.createElement('div');
            hourDiv.className = 'hour';
            hourDiv.dataset.day = day;
            hourDiv.dataset.hour = hour;
            dayDiv.appendChild(hourDiv);
        }
        calendar.appendChild(dayDiv);
    }
    renderBookings();
}

function renderBookings() {
    bookings.forEach(booking => {
        const start = new Date(booking.date + 'T' + booking.startTime);
        const end = new Date(booking.date + 'T' + booking.endTime);
        const day = start.getDay();
        for (let hour = start.getHours(); hour < end.getHours(); hour++) {
            const hourDiv = document.querySelector(`.hour[data-day="${day}"][data-hour="${hour}"]`);
            if (hourDiv) {
                hourDiv.className = 'booking';
                hourDiv.textContent = `${booking.equipment}: ${booking.startTime} - ${booking.endTime}`;
            }
        }
    });
}

bookingForm.addEventListener('submit', (event) => {
    event.preventDefault();
    const formData = new FormData(bookingForm);
    const newBooking = {
        equipment: formData.get('equipment'),
        date: formData.get('date'),
        startTime: formData.get('startTime'),
        endTime: formData.get('endTime')
    };
    bookings.push(newBooking);
    renderCalendar();
    bookingForm.reset();
});

filterButton.addEventListener('click', () => {
    const selectedEquipment = equipmentSelect.value;
    const selectedLightSources = Array.from(lightSourceSelect.selectedOptions).map(option => option.value);
    console.log(selectedEquipment, selectedLightSources);
    // Implement filtering logic here
    renderCalendar();
});

renderCalendar();
